let form = document.getElementById("formulario");
const url = form.action;

let name = document.querySelector("input[type=text]");
let email = document.querySelector("input[type=email]");
let phone = document.querySelector("input[type=tel]");
let message = document.querySelector("textarea");

let dialog = document.getElementById("form-message");
let resultMessage = document.getElementById("text-message");
let btnClose = document.getElementById("btn-close-msg");


async function enviarFormulario(event) {
    event.preventDefault();

    const datos = {
        name: name.value,
        email: email.value,
        phone: phone.value,
        message: message.value  
    };
    
    const fetchParams = {
        method: 'POST',
        headers: {
            "Accept": "application/json",
            "Content-Type": "application/json",
            "X-API-Key": "a0wwnrex_JeRhBybn5iFYziStv9d2M6Mchd2b4B4H"
        },
        body: JSON.stringify({ item: datos })
    };
    
    try {
        let response = await fetch(url, fetchParams);
        if (response.ok) {
            let result = await response.json();
            resultMessage.innerHTML = "El formulario se ha enviado correctamente";
            dialog.showModal();
            btnClose.addEventListener("click", () => {
                dialog.close();
            });
            form.reset();
        } else {
            throw new Error(response.statusText);
        }
    } catch (err) {
        resultMessage.innerHTML = "Error al enviar el formulario -\n" + err;
        dialog.showModal();
        btnClose.addEventListener("click", () => {
            dialog.close();
        });
    }
}

document.addEventListener("DOMContentLoaded", function() {
    document.querySelector('form').addEventListener('submit', enviarFormulario);
    });


    HTML

        <section id="contact-form" class="width-section">
        <h1>Contact Us</h1>
        <form action="https://database.deta.sh/v1/a0wwnrex/contactmessages/items" method="POST" id="formulario">
            <label for="name">Full Name *</label>
            <input type="text" id="name" name="name" placeholder="Enter your full name" required/>
            
            <div id="email-phone-container"> 
                <div>
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email address" required/>
                </div>
                <div>
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" pattern="(\+)[0-9]{11}" title="Por favor, indica el código de páis seguido de tu número de teléfono, e.g. +34XXXXXXXXX" required/>
                </div>
            </div>
    
            <label for="message">Message</label>
            <textarea id="message" name="message" placeholder="Write your message here..." rows="10" minlength="50" required></textarea>
    
            <button type="submit" class="button" id="submit">Submit</button>
            <dialog id="form-message">
                <p id="text-message"></p>
                <button id="btn-close-msg" type="button">Accept</button>
            </dialog>
        </form>
    </section>

